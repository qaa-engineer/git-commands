# 30 команд Git, необходимых для освоения интерфейса командной строки Git


<div data-gallery-root="" lang="ru" class="tm-article-body"><div></div> <div id="post-content-body"><div><div class="article-formatted-body article-formatted-body_version-1"><div xmlns="http://www.w3.org/1999/xhtml"><a href="https://habr.com/ru/company/ruvds/blog/599663/"><div style="text-align:center;"><img data-src="https://habrastorage.org/webt/uw/-g/bd/uw-gbd0lej3jcbrwjzclezzpxbu.png" src="https://habrastorage.org/r/w1560/webt/uw/-g/bd/uw-gbd0lej3jcbrwjzclezzpxbu.png"></div></a><br>
Git — самая популярная в мире распределённая система контроля версий. Линус Торвальдс, разработчик ядра ОС Linux, создал этот инструмент ещё в 2005 году, а сегодня Git активно поддерживается как проект с открытым исходным кодом. Огромное количество открытых и коммерческих проектов используют Git для контроля версий.<br>
<br>
В данной статье перечисляются самые основные команды, которые следует знать разработчику, чтобы освоить управление репозиториями GitHub на высоком уровне. Ознакомиться с ними будет полезно как новичкам, так и опытным разработчикам.<br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF">30 основных команд, которые сделают из вас мастера Git</font></h2><br>
<ol>
<li><a href="#1">Как задать имя пользователя и адрес электронной почты</a></li>
<li><a href="#2">Кэширование учётных данных</a></li>
<li><a href="#3">Инициализация репозитория</a></li>
<li><a href="#4">Добавление отдельных файлов или всех файлов в область подготовленных файлов</a></li>
<li><a href="#5">Проверка статуса репозитория</a></li>
<li><a href="#6">Внесение изменений однострочным сообщением или через редактор</a></li>
<li><a href="#7">Просмотр истории коммитов с изменениями</a></li>
<li><a href="#8">Просмотр заданного коммита</a></li>
<li><a href="#9">Просмотр изменений до коммита</a></li>
<li><a href="#10">Удаление отслеживаемых файлов из текущего рабочего дерева</a></li>
<li><a href="#11">Переименование файлов</a></li>
<li><a href="#12">Отмена подготовленных и неподготовленных изменений</a></li>
<li><a href="#13">Изменение последнего коммита</a></li>
<li><a href="#14">Откат последнего коммита</a></li>
<li><a href="#15">Откат заданного коммита</a></li>
<li><a href="#16">Создание новой ветки и переход в неё</a></li>
<li><a href="#17">Просмотр списка веток</a></li>
<li><a href="#18">Удаление ветки</a></li>
<li><a href="#19">Слияние двух веток</a></li>
<li><a href="#20">Отображение журнала фиксации в виде графика для текущей или всех веток</a></li>
<li><a href="#21">Прекращение слияния при конфликте</a></li>
<li><a href="#22">Добавление удалённого репозитория</a></li>
<li><a href="#23">Просмотр удалённых URL-адресов</a></li>
<li><a href="#24">Получение дополнительных сведений об удалённом репозитории</a></li>
<li><a href="#25">Отправка изменений в удалённый репозиторий</a></li>
<li><a href="#26">Получение изменений из удалённого репозитория</a></li>
<li><a href="#27">Слияние удалённого репозитория с локальным</a></li>
<li><a href="#28">Отправка новой ветки в удалённый репозиторий</a></li>
<li><a href="#29">Удаление удалённой ветки</a></li>
<li><a href="#30">Использование перебазирования</a></li>
</ol><br>
<a name="1"></a><h2><font color="#3AC1EF">1. Как задать имя пользователя и адрес электронной почты</font></h2><br>
Имя пользователя нужно, чтобы привязывать коммиты к вашему имени. Это не то же самое, что имя пользователя учётной записи GitHub, с помощью которого выполняется вход в профиль на GitHub. Задать или изменить имя пользователя можно с помощью команды <code>git config</code>. Новое имя будет автоматически отображаться в последующих коммитах, отправленных на GitHub через командную строку. Если хотите скрыть своё реальное имя, можно использовать в качестве имени пользователя Git произвольный набор символов.<br>
<br>
<pre><code class="xml hljs">git config --global user.name "Tara Routray"</code></pre><br>
Кроме того, командой <code>git config</code> можно изменять адрес электронной почты, привязанный к вашим коммитам Git. Новый адрес электронной почты будет автоматически отображаться во всех дальнейших коммитах, поданных на GitHub через командную строку.<br>
<br>
<pre><code class="xml hljs">git config --global user.email "dev@tararoutray.com"</code></pre><br>
<a name="2"></a><br>
<h2><font color="#3AC1EF">2. Кэширование учётных данных</font></h2><br>
Кэшировать учётные данные можно с помощью параметра <code>config</code> с флагом <code>--global</code>. Так вы избавитесь от необходимости вручную вводить имя пользователя и пароль при создании нового коммита.<br>
<br>
<pre><code class="xml hljs">git config --global credential.helper cache</code></pre><br>
<a name="3"></a><br>
<h2><font color="#3AC1EF">3. Инициализация репозитория</font></h2><br>
Создать пустой репозиторий Git или вновь инициализировать существующий можно параметром <code>init</code>. При инициализации он создаст скрытую папку. В ней содержатся все объекты и ссылки, которые Git использует и создаёт в истории работы над проектом.<br>
<br>
<pre><code class="xml hljs">git init</code></pre><br>
<a name="4"></a><br>
<h2><font color="#3AC1EF">4. Добавление отдельных файлов или всех файлов в область подготовленных файлов</font></h2><br>
Добавить отдельный файл в область подготовленных файлов можно параметром <code>add</code> с указанием имени файла. Просто замените <code>somefile.js</code> на актуальное имя.<br>
<br>
<pre><code class="xml hljs">git add somefile.js</code></pre><br>
Кроме того, можно добавить все файлы и папки в эту область, предоставив wildcard <code>.</code> вместо имени файла:<br>
<br>
<pre><code class="xml hljs">git add .</code></pre><br>
<a name="5"></a><br>
<h2><font color="#3AC1EF">5. Проверка статуса репозитория</font></h2><br>
Просмотреть статус нужного репозитория можно по ключевому слову <code>status</code>: его действие распространяется на подготовленные, неподготовленные и неотслеживаемые файлы.<br>
<br>
<pre><code class="xml hljs">git status</code></pre><br>
<a name="6"></a><br>
<h2><font color="#3AC1EF">6. Внесение изменений однострочным сообщением или через редактор</font></h2><br>
При создании коммита в репозитории можно добавить однострочное сообщение с помощью параметра <code>commit</code> с флагом <code>-m</code>. Само сообщение вводится непосредственно после флага, в кавычках.<br>
<br>
<pre><code class="xml hljs">git commit -m "Your short summary about the commit"</code></pre><br>
Также можно открыть текстовый редактор в терминале для написания полного сообщения коммита. Оно может состоять из нескольких строк текста, в котором подробно характеризуются изменения, внесённые в репозиторий.<br>
<br>
<pre><code class="xml hljs">git commit</code></pre><br>
<a name="7"></a><br>
<h2><font color="#3AC1EF">7. Просмотр истории коммитов с изменениями</font></h2><br>
Просматривать изменения, внесённые в репозиторий, можно с помощью параметра <code>log</code>. Он отображает список последних коммитов в порядке выполнения. Кроме того, добавив флаг <code>-p</code>, вы можете подробно изучить изменения, внесённые в каждый файл.<br>
<br>
<pre><code class="xml hljs">git log -p</code></pre><br>
<a name="8"></a><br>
<h2><font color="#3AC1EF">8. Просмотр заданного коммита</font></h2><br>
Просмотреть полный список изменений, внесённых конкретным коммитом, можно с помощью параметра <code>show</code>, указав идентификатор или хеш коммита. Значение хеша уникально для каждого коммита, созданного в вашем репозитории.<br>
<br>
<pre><code class="xml hljs">git show 1af17e73721dbe0c40011b82ed4bb1a7dbe3ce29</code></pre><br>
Также можно использовать сокращённый хеш.<br>
<br>
<pre><code class="xml hljs">git show 1af17e</code></pre><br>
<a name="9"></a><br>
<h2><font color="#3AC1EF">9. Просмотр изменений до коммита</font></h2><br>
Можно просматривать список изменений, внесённых в репозиторий, используя параметр <code>diff</code>. По умолчанию отображаются только изменения, не подготовленные для фиксации.<br>
<br>
<pre><code class="xml hljs">git diff</code></pre><br>
Для просмотра подготовленных изменений необходимо добавить флаг <code>--staged</code>.<br>
<br>
<pre><code class="xml hljs">git diff --staged</code></pre><br>
Также можно указать имя файла как параметр и просмотреть изменения, внесённые только в этот файл.<br>
<br>
<pre><code class="xml hljs">git diff somefile.js</code></pre><br>
<a name="10"></a><br>
<h2><font color="#3AC1EF">10. Удаление отслеживаемых файлов из текущего рабочего дерева</font></h2><br>
Удалять файлы из текущего рабочего дерева можно с помощью параметра <code>rm</code>. При этом файлы удаляются и из индекса.<br>
<br>
<pre><code class="xml hljs">git rm dirname/somefile.js</code></pre><br>
Можно также использовать маски файлов (например *.js) для удаления всех файлов, соответствующих критерию.<br>
<br>
<pre><code class="xml hljs">git rm dirname/*.html</code></pre><br>
<a name="11"></a><br>
<h2><font color="#3AC1EF">11. Переименование файлов</font></h2><br>
Переименовать файл или папку можно параметром <code>mv</code>. Для него указывается источник <code>source</code> и назначение <code>destination</code>. Источник — реально существующий файл или папка, а назначение — существующая папка.<br>
<br>
<pre><code class="xml hljs">git mv dir1/somefile.js dir2</code></pre><br>
При выполнении команды файл или папка, указанные как источник, будут перемещены в папку назначения. Индекс будет обновлён соответственно, но изменения нужно записать.<br>
<br>
<a name="12"></a><br>
<h2><font color="#3AC1EF">12. Отмена подготовленных и неподготовленных изменений</font></h2><br>
Восстановить файлы рабочего дерева, не подготовленные к коммиту, можно параметром <code>checkout</code>. Для проведения операции требуется указать путь к файлу. Если путь не указан, параметр <code>git checkout</code> изменит указатель HEAD, чтобы задать указанную ветку как текущую.<br>
<br>
<pre><code class="xml hljs">git checkout somefile.js</code></pre><br>
Восстановить подготовленный файл рабочего дерева можно параметром <code>reset</code>. Потребуется указать путь к файлу, чтобы убрать его из области подготовленных файлов. При этом не будет производиться откат никаких изменений или модификаций — однако файл перейдёт в категорию не подготовленных к коммиту.<br>
<br>
<pre><code class="xml hljs">git reset HEAD somefile.js</code></pre><br>
Если нужно выполнить это действие для всех подготовленных файлов, путь к ним указывать не надо.<br>
<br>
<pre><code class="xml hljs">git reset HEAD</code></pre><br>
<a name="13"></a><br>
<h2><font color="#3AC1EF">13. Изменение последнего коммита</font></h2><br>
Внести изменения в последний коммит можно параметром <code>commit</code> с флагом <code>--amend</code>. Например, вы записали изменения, внесённые в ряд файлов, и поняли, что допустили ошибку в сообщении коммита. В этом случае можете воспользоваться указанной командой, чтобы отредактировать сообщение предыдущего коммита, не изменяя его снимок.<br>
<br>
<pre><code class="xml hljs">git commit --amend -m "Updated message for the previous commit"</code></pre><br>
Также можно вносить изменения в файлы, отправленные ранее. Например, вы изменили несколько файлов в ряде папок и хотите их записать как единый снимок, но забыли добавить в коммит одну из папок. Чтобы исправить такую ошибку, достаточно подготовить для фиксации остальные файлы и папки и создать коммит с флагами <code>--amend</code> и <code>--no-edit</code>.<br>
<br>
<pre><code class="xml hljs">git add dir1
git commit

# Here you forgot to add dir2 to commit, you can execute the
following command to amend the other files and folders.

git add dir2
git commit --amend --no-edit</code></pre><br>
Флаг <code>--no-edit</code> позволит внести в коммит поправку без изменения сообщения коммита. В этом случае итоговый коммит заменит неполный, а выглядеть это будет так, как будто мы отправили изменения ко всем файлам в нужных папках как единый снимок.<br>
<br>
<blockquote><b><font color="#3AC1EF">Внимание! Не изменяйте публичные коммиты.</font></b><br>
<br>
С помощью amend прекрасно исправляются локальные коммиты, а исправления можно передать в общий репозиторий. Однако изменять коммиты, уже доступные другим пользователям, не следует. Помните, что изменённые коммиты являются совершенно новыми, а предыдущий коммит уже не будет доступен в текущей ветке. Последствия будут такими же, как при отмене изменений публичного снимка.</blockquote><br>
<a name="14"></a><br>
<h2><font color="#3AC1EF">14. Откат последнего коммита</font></h2><br>
Откатить последний коммит можно с помощью параметра <code>revert</code>. Создастся новый коммит, содержащий обратные преобразования относительно предыдущего, и добавится к истории текущей ветки.<br>
<br>
<pre><code class="xml hljs">git revert HEAD</code></pre><br>
<h3><font color="#3AC1EF">▍ Разница между revert и reset</font></h3><br>
Команда <code>git revert</code> отменяет изменения, записанные только одним коммитом. Она не откатывает проект к более раннему состоянию, удаляя все последующие коммиты, как это делает команда <code>git reset</code>.<br>
<br>
У команды revert есть два крупных преимущества по сравнению с reset. Во-первых, она не меняет историю проекта и производит операцию, безопасную для коммитов. Во-вторых, её объектом выступает конкретный коммит, созданный в любой момент истории, а git reset всегда берёт за точку отсчёта текущий коммит. К примеру, если нужно отменить старый коммит с помощью git reset, придётся удалить все коммиты, поданные после целевого, а затем выполнить их повторно. Следовательно, команда <code>git revert</code> — гораздо более удобный и безопасный способ отмены изменений.<br>
<br>
<a name="15"></a><br>
<h2><font color="#3AC1EF">15. Откат заданного коммита</font></h2><br>
Откатить проект до заданного коммита можно с помощью параметра <code>revert</code> и идентификатора коммита. Создастся новый коммит — копия коммита с предоставленным идентификатором — и добавится к истории текущей ветки.<br>
<br>
<pre><code class="xml hljs">git revert 1af17e</code></pre><br>
<a name="16"></a><br>
<h2><font color="#3AC1EF">16. Создание новой ветки и переход в неё</font></h2><br>
Создать новую ветку можно с помощью параметра <code>branch</code>, указав имя ветки.<br>
<br>
<pre><code class="xml hljs">git branch new_branch_name</code></pre><br>
Но Git не переключится на неё автоматически. Для автоматического перехода нужно добавить флаг <code>-b</code> и параметр <code>checkout</code>.<br>
<br>
<pre><code class="xml hljs">git checkout -b new_branch_name</code></pre><br>
<a name="17"></a><br>
<h2><font color="#3AC1EF">17. Просмотр списка веток</font></h2><br>
Можно просматривать полный список веток, используя параметр <code>branch</code>. Команда отобразит все ветки, отметит текущую звёздочкой (*) и выделит её цветом.<br>
<br>
<pre><code class="xml hljs">git branch</code></pre><br>
Также можно вывести список удалённых веток с помощью флага <code>-a</code>.<br>
<br>
<pre><code class="xml hljs">git branch -a</code></pre><br>
<a name="18"></a><br>
<h2><font color="#3AC1EF">18. Удаление ветки</font></h2><br>
Удалить ветку можно параметром <code>branch</code> с добавлением флага <code>-d</code> и указанием имени ветки. Если вы завершили работу над веткой и объединили её с основной, можно её удалить без потери истории. Однако, если выполнить команду удаления до слияния — в результате появится сообщение об ошибке. Этот защитный механизм предотвращает потерю доступа к файлам.<br>
<br>
<pre><code class="xml hljs">git branch -d existing_branch_name</code></pre><br>
Для принудительного удаления ветки используется флаг <code>-D</code> с заглавной буквой. В этом случае ветка будет удалена независимо от текущего статуса, без предупреждений.<br>
<br>
<pre><code class="xml hljs">git branch -D existing_branch_name</code></pre><br>
Вышеуказанные команды удаляют только локальную копию ветки. В удалённом репозитории она может сохраниться. Если хотите стереть удалённую ветку, выполните следующую команду:<br>
<br>
<pre><code class="xml hljs">git push origin --delete existing_branch_name</code></pre><br>
<a name="19"></a><br>
<h2><font color="#3AC1EF">19. Слияние двух веток</font></h2><br>
Объединить две ветки можно параметром <code>merge</code> с указанием имени ветки. Команда объединит указанную ветку с основной.<br>
<br>
<pre><code class="xml hljs">git merge existing_branch_name</code></pre><br>
Если надо выполнить коммит слияния, выполните команду git merge с флагом <code>--no-ff</code>.<br>
<br>
<pre><code class="xml hljs">git merge --no-ff existing_branch_name</code></pre><br>
Указанная команда объединит заданную ветку с основной и произведёт коммит слияния. Это необходимо для фиксации всех слияний в вашем репозитории.<br>
<br>
<a name="20"></a><br>
<h2><font color="#3AC1EF">20. Отображение журнала фиксации в виде графика для текущей или всех веток</font></h2><br>
Просмотреть историю коммитов в виде графика для текущей ветки можно с помощью параметра log и флагов <code>--graph --oneline --decorate</code>. Опция <code>--graph</code> выведет график в формате ASCII, отражающий структуру ветвления истории коммитов. В связке с флагами <code>--oneline</code> и <code>--decorate</code>, этот флаг упрощает понимание того, к какой ветке относится каждый коммит.<br>
<br>
<pre><code class="xml hljs">git log --graph --oneline --decorate</code></pre><br>
Для просмотра истории коммитов по всем веткам используется флаг <code>--all</code>.<br>
<br>
<pre><code class="xml hljs">git log --all --graph --oneline --decorate</code></pre><br>
<a name="21"></a><br>
<h2><font color="#3AC1EF">21. Прекращение слияния при конфликте</font></h2><br>
Прервать слияние в случае конфликта можно параметром <code>merge</code> с флагом <code>--abort</code>. Он позволяет остановить процесс слияния и вернуть состояние, с которого этот процесс был начат.<br>
<br>
<pre><code class="xml hljs">git merge --abort</code></pre><br>
Также при конфликте слияния можно использовать параметр <code>reset</code>, чтобы восстановить конфликтующие файлы до стабильного состояния.<br>
<br>
<pre><code class="xml hljs">git reset</code></pre><br>
<a name="22"></a><br>
<h2><font color="#3AC1EF">22. Добавление удалённого репозитория</font></h2><br>
Добавить удалённый репозиторий можно параметром <code>remote add</code>, указав <code>shortname</code> и <code>url</code> требуемого репозитория.<br>
<br>
<pre><code class="xml hljs">git remote add awesomeapp https://github.com/someurl..</code></pre><br>
<a name="23"></a><br>
<h2><font color="#3AC1EF">23. Просмотр удалённых URL-адресов</font></h2><br>
Просматривать удалённые URL-адреса можно параметром <code>remote</code> с флагом <code>-v</code>. Этот параметр отображает удалённые подключения к другим репозиториям.<br>
<br>
<pre><code class="xml hljs">git remote -v</code></pre><br>
Такая команда открывает доступ к интерфейсу управления удалёнными записями, которые хранятся в файле <code>.git/config</code> репозитория.<br>
<br>
<a name="24"></a><br>
<h2><font color="#3AC1EF">24. Получение дополнительных сведений об удалённом репозитории</font></h2><br>
Получить подробные сведения об удалённом репозитории можно с помощью параметра <code>remote show</code> с указанием имени репозитория — например, <code>origin</code>.<br>
<br>
<pre><code class="xml hljs">git remote show origin</code></pre><br>
Эта команда отображает список веток, связанных с удалённым репозиторием, а также рабочих станций, подключённых для получения и отправки файлов.<br>
<br>
<a name="25"></a><br>
<h2><font color="#3AC1EF">25. Отправка изменений в удалённый репозиторий</font></h2><br>
Отправлять изменения в удалённый репозиторий можно параметром <code>push</code> с указанием имени репозитория и ветки.<br>
<br>
<pre><code class="xml hljs">git push origin main</code></pre><br>
Эта команда передаёт локальные изменения в центральный репозиторий, где с ними могут ознакомиться другие участники проекта.<br>
<br>
<a name="26"></a><br>
<h2><font color="#3AC1EF">26. Получение изменений из удалённого репозитория</font></h2><br>
Для загрузки изменений из удалённого репозитория используется параметр <code>pull</code>. Он скачивает копию текущей ветки с указанного удалённого репозитория и объединяет её с локальной копией.<br>
<br>
<pre><code class="xml hljs">git pull</code></pre><br>
Также можно просмотреть подробные сведения о загруженных файлах с помощью флага <code>--verbose</code>.<br>
<br>
<pre><code class="xml hljs">git pull --verbose</code></pre><br>
<a name="27"></a><br>
<h2><font color="#3AC1EF">27. Слияние удалённого репозитория с локальным</font></h2><br>
Слияние удалённого репозитория с локальным выполняется параметром merge с указанием имени удалённого репозитория.<br>
<br>
<pre><code class="xml hljs">git merge origin</code></pre><br>
<a name="28"></a><br>
<h2><font color="#3AC1EF">28. Отправка новой ветки в удалённый репозиторий</font></h2><br>
Передать новую ветку в удалённый репозиторий можно параметром push с флагом <code>-u</code>, указав имя репозитория и имя ветки.<br>
<br>
<pre><code class="xml hljs">git push -u origin new_branch</code></pre><br>
<a name="29"></a><br>
<h2><font color="#3AC1EF">29. Удаление удалённой ветки</font></h2><br>
Чтобы избавиться от удалённой ветки, используйте параметр <code>push</code> с флагом <code>--delete</code>, указав имя удалённого репозитория и имя ветки.<br>
<br>
<pre><code class="xml hljs">git push --delete origin existing_branch</code></pre><br>
<a name="30"></a><br>
<h2><font color="#3AC1EF">30. Использование перебазирования</font></h2><br>
Для доступа к этой функции используйте параметр <code>rebase</code> с указанием имени ветки. Перебазирование — это процесс объединения или перемещения последовательности коммитов на новый родительский снимок.<br>
<br>
<pre><code class="xml hljs">git rebase branch_name</code></pre><br>
Эта команда изменит основу ветки с одного коммита на другой, как если бы вы начали ветку с другого коммита. В Git это достигается за счёт создания новых коммитов и применения их к указанному базовому коммиту. Необходимо понимать, что, хотя ветка и выглядит такой же, она состоит из совершенно новых коммитов.<br>
<br>
<h3><font color="#3AC1EF">▍ Спасибо за внимание!</font></h3><br>
Вы узнали 30 основных команд интерфейса командной строки Git. Теперь, при условии регулярной практики, у вас есть всё необходимое, чтобы достичь мастерства в управлении репозиториями GitHub.<br>
<br>
<a href="http://ruvds.com/ru-rub?utm_source=habr&amp;utm_medium=article&amp;utm_campaign=perevod&amp;utm_content=30_komand_git_neobxodimyx_dlya_osvoeniya_interfejsa_komandnoj_stroki_git"><img data-src="https://habrastorage.org/webt/ou/g5/kh/oug5kh6sjydt9llengsiebnp40w.png" src="https://habrastorage.org/r/w1560/webt/ou/g5/kh/oug5kh6sjydt9llengsiebnp40w.png"></a></div></div></div> <div class="v-portal" style="display:none;"></div></div> <!----> <!----></div>
